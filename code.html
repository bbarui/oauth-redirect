<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JSON Viewer</title>
  <style>
    body {
      margin: 0;
      background-color: #1e1e1e;
      color: #dcdcdc;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      padding: 1rem;
    }
    pre {
      white-space: pre-wrap;
      word-break: break-word;
      margin-bottom: 2rem;
    }
    .key       { color: #9cdcfe; }
    .string    { color: #ce9178; }
    .number    { color: #b5cea8; }
    .boolean   { color: #569cd6; }
    .null      { color: #808080; }
    .access    { color: #00ff7f; font-weight: bold; }
    .refresh   { color: #ffa500; font-weight: bold; }
    .note      {
      color: #6a9955;
      font-style: italic;
      border-top: 1px solid #333;
      padding-top: 0.5rem;
    }
  </style>
</head>
<body>
  <pre id="json"></pre>
  <div class="note">âœ… All necessary information has been received successfully.</div>

  <script>
    const params = new URLSearchParams(location.search);
    const raw = params.get("json");
    const pre = document.getElementById("json");

    function syntaxHighlight(json) {
      const obj = JSON.parse(json);
      const formatted = JSON.stringify(obj, null, 2);
      const highlighted = formatted.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(?=\s*:))|("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*")|(\btrue\b|\bfalse\b|null)|(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/g, function (match) {
        if (/^"/.test(match)) {
          if (/:$/.test(match)) return `<span class="key">${match}</span>`;
          return match;
        }
        if (/true|false/.test(match)) return `<span class="boolean">${match}</span>`;
        if (/null/.test(match)) return `<span class="null">${match}</span>`;
        return `<span class="number">${match}</span>`;
      });

      return highlighted
        .replace(/("access_token":\s*)"([^"]*)"/, (_, key, value) =>
          `${key}"<span class="access">${value}</span>"`)
        .replace(/("refresh_token":\s*)"([^"]*)"/, (_, key, value) =>
          `${key}"<span class="refresh">${value}</span>"`);
    }

    try {
      pre.innerHTML = syntaxHighlight(raw);
    } catch {
      pre.textContent = 'Invalid or missing JSON.';
      document.querySelector('.note').textContent = '';
    }
  </script>
</body>
</html>
